<!--
John Scales
CWID 888865730
Class Number 335-04
13602 Loumont st.
Whittier, CA 90601
24 September 2019
Aswilanga Cavern
This file contains all of the html for project 2.
-->

<!DOCTYPE html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<title>Great Aswilanga Caverns</title>
<link rel="stylesheet" href="./styles.css">
</head>
<body>
<h1>Great Aswilanga Caverns</h1>
<h3>A visual demonstration of a search algorithm</h3>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="./draw-stuff.js"></script>
<canvas id="rotation" width="1200" height="650"></canvas>
<script>
  var canvas = document.getElementById( "rotation" );
  var context = canvas.getContext( "2d" );
  myGraph();
  //Pathfinder(sx,sy,sz);
  makePath(sx,sy,sz);
  //console.log(nodes);
  var counter = path.length - 2;
  var cc = 0;

//FSM
console.log(printnodes);
console.log(path);
for(var i = path.length-1; i>-1;i--){
  printnodes.push(path[i]);
}
console.log(printnodes);
  const loopDrawRect = setInterval(() => {
    var x = path[counter].x;
    var y = path[counter].y;
    var z = path[counter].z;
    var prevx = path[counter].fx;
    var prevy = path[counter].fy;
    var prevz = path[counter].fz;
    var msg = "temp";
    if(path[counter].id == "F00"){
      draw_room(context, 'yellow', 'yellow', x, y, z);
      drawTxt(context, x, y, z);
      msg = "Path Start: " + path[counter].id;
      console.log("Starting at: " + path[counter].id);
    }
    else if (counter == 0){
      draw_room(context, 'yellow', 'yellow', x, y, z);
      drawLine(context,'yellow',prevx, prevy, prevz,x, y, z);
      drawTxt(context, x, y, z);
      msg = "Final, center most node: "+path[counter].id;
      console.log("Final, center most node: "+path[counter].id);
    }
    else{
      draw_room(context, 'yellow', 'yellow', x, y, z);
      drawLine(context,'yellow',prevx, prevy, prevz,x, y, z);
      drawTxt(context, x, y, z);
      msg = "Move to "+path[counter].id;
      console.log("Move to "+path[counter].id);
    }
    draw_text(context, msg, 900, 10 + 10*cc);
    cc++
    counter--;
    if (counter == -1){
      clearInterval(loopDrawRect);
    }
  }, 20)

</script>

</body>
</html>
