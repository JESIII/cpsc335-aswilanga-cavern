<!--
John Scales
CWID 888865730
Class Number 335-04
13602 Loumont st.
Whittier, CA 90601
24 September 2019
Aswilanga Cavern
This file contains all of the html for project 2.
-->

<!DOCTYPE html>
<head>
<title>Great Aswilanga Caverns</title>
<link rel="stylesheet" href="./styles.css">
</head>
<body>
<h1>Great Aswilanga Caverns</h1>
<h3>A visual demonstration of a search algorithm</h3>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="./draw-stuff.js"></script>
<canvas id="rotation" width="1200" height="650"></canvas>
<script>
  var canvas = document.getElementById( "rotation" );
  var context = canvas.getContext( "2d" );
  myGraph();
  Pathfinder(sx,sy,sz);
  Final();
  console.log(nodes);
  var counter = 0;
  //console.log(nodes);
//FSM
  const loopDrawRect = setInterval(() => {
    var x = nodes[counter].x;
    var y = nodes[counter].y;
    var z = nodes[counter].z;
    var msgid = makeID(x,y,z);
    var prevx = nodes[counter].fx;
    var prevy = nodes[counter].fy;
    var prevz = nodes[counter].fz;
    var msg = "temp";
    if(nodes[counter].status == "candidate"){
      draw_room(context, 'blue', 'blue', x, y, z);
      //drawLine(context,'blue',prevx, prevy, prevz,x, y, z);
      drawTxt(context, x, y, z);
      msg = "Now Searching " + msgid;
      console.log("Now Searching " + msgid);
    }
    else if(nodes[counter].status == "explored"){
      draw_room(context, 'red', 'red', x, y, z);
      drawLine(context,'red',prevx, prevy, prevz,x, y, z);
      drawTxt(context, x, y, z);
      msg = "Move to "+msgid + " from " + makeID(prevx,prevy,prevz);
      console.log(""+msgid + " ");
    }
    else if(nodes[counter].status == "start"){
      draw_room(context, 'green', 'green', x, y, z);
      drawTxt(context, x, y, z);
      msg = ""+ msgid +" is the starting room.";
      console.log(""+ msgid +" is the starting room.");
    }
    else if(nodes[counter].status == "final"){
      draw_text(context, "Center Most Node: "+msgid, 900, 10 + 10*counter);
      draw_room(context, 'green', 'green', x, y, z);
      msg = "Center Most Node: "+msgid;
      console.log("Center Most Node: "+msgid);
    }
    draw_text(context, msg, 900, 10 + 10*counter);
    //console.log(msg);
    counter += 1;
    if (counter == nodes.length -1){
      clearInterval(loopDrawRect);
    }
  }, 200)

</script>

</body>
</html>
