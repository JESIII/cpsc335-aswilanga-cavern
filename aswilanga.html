<!--
John Scales
CWID 888865730
Class Number 335-04
13602 Loumont st.
Whittier, CA 90601
24 September 2019
Aswilanga Cavern
This file contains all of the html for project 2.
-->

<!DOCTYPE html>
<head>
<title>Great Aswilanga Caverns</title>
<link rel="stylesheet" href="./styles.css">
</head>
<body>
<h1>Great Aswilanga Caverns</h1>
<h3>A visual demonstration of a search algorithm</h3>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="./draw-stuff.js"></script>
<canvas id="rotation" width="1200" height="650"></canvas>
<script>
  var canvas = document.getElementById( "rotation" );
  var context = canvas.getContext( "2d" );
  myGraph();
  Pathfinder(sx, sy, sz);
  var counter = 0;
//FSM
  const loopDrawRect = setInterval(() => {
    var x = ntd[counter].x;
    var y = ntd[counter].y;
    var z = ntd[counter].z;
    var msgid = makeID(x,y,z);
    var prevx = ntd[counter].fromx;
    var prevy = ntd[counter].fromy;
    var prevz = ntd[counter].fromz;
    var msg = "temp";
    if(ntd[counter].status == "candidate"){
      draw_room(context, 'blue', 'blue', x, y, z);
      drawLine(context,'blue',prevx, prevy, prevz,x, y, z);
      drawTxt(context, x, y, z);
      msg = "Room " + msgid + " is being searched.";
    }
    else if(ntd[counter].status == "red"){
      draw_room(context, 'red', 'red', x, y, z);
      //drawLine(context,'red',prevx, prevy, prevz,x, y, z);
      drawTxt(context, x, y, z);
      msg = ""+msgid + " has no more rooms to explore.";
    }
    else if(ntd[counter].status == "start"){
      draw_room(context, 'green', 'green', x, y, z);
      drawTxt(context, x, y, z);
      msg = ""+ msgid +" is the starting room.";
    }
    else if(ntd[counter].status == "final"){
      draw_text(context, "Exploring completed.", 800, 10 + 10*counter);
      counter = ntd.length;
    }
    else{

    }
    draw_text(context, msg, 800, 10 + 10*counter);
    console.log(msg);
    counter += 1;
    if (counter == ntd.length){
      clearInterval(loopDrawRect);
    }
  }, 100)
</script>

</body>
</html>
